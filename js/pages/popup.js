document.addEventListener("DOMContentLoaded",function(){"use strict";var e=new PromiseChrome;document.getElementById("liker").addEventListener("click",function(){e.promiseQuery({active:!0,currentWindow:!0}).then(function(e){chrome.tabs.sendMessage(e[0].id,{action:"openLikerPage",page:"liker.html",userName:document.getElementById("username").value})})}),document.getElementById("likes").addEventListener("click",function(){e.promiseQuery({active:!0,currentWindow:!0}).then(function(e){chrome.tabs.sendMessage(e[0].id,{action:"openLikesPage",page:"likes.html",userName:document.getElementById("username").value})})}),document.getElementById("massfollow").addEventListener("click",function(){e.promiseQuery({active:!0,currentWindow:!0}).then(function(e){chrome.tabs.sendMessage(e[0].id,{action:"openMassFollowPage",page:"follow.html"})})}),document.getElementById("massblock").addEventListener("click",function(){e.promiseQuery({active:!0,currentWindow:!0}).then(function(e){chrome.tabs.sendMessage(e[0].id,{action:"openMassBlockPage",page:"block.html"})})}),document.getElementById("instaUsers").addEventListener("click",function(){var t=document.getElementById("username").value;t?e.promiseCheckOpenTab({url:chrome.extension.getURL("instaUsers.html")}).then(function(){for(var n=instaDefOptions.you===t?t:instaUserInfo.getUserProfile({username:t}),s=e.promiseQuery({active:!0,currentWindow:!0}),o="All",r=document.getElementsByName("relType"),a=0,i=r.length;a<i;a++)if(r[a].checked){o=r[a].id;break}Promise.all([n,s]).then(e=>{let[n,s]=e;chrome.tabs.sendMessage(s[0].id,{action:"get_insta_users",page:"instaUsers.html",userName:t,userId:n.id,user_is_private:n.is_private,user_followed_by_viewer:n.followed_by_viewer,follows_count:n.follows_count,followed_by_count:n.followed_by_count,limit:+document.getElementById("first").value,relType:o})})},()=>alert(instaMessages.getMessage("TABISOPEN"))):alert(instaMessages.getMessage("USERNAMEISREQ"))}),document.getElementById("findCommonUsers").addEventListener("click",function(){var t=document.getElementById("username_1").value;if(t){var n=document.getElementById("username_2").value;n?t!==n?e.promiseCheckOpenTab({url:chrome.extension.getURL("commonUsers.html")}).then(function(){var s=instaDefOptions.you===t?t:instaUserInfo.getUserProfile({username:t}),o=instaDefOptions.you===n?n:instaUserInfo.getUserProfile({username:n}),r=e.promiseQuery({active:!0,currentWindow:!0});Promise.all([s,o,r]).then(e=>{let[s,o,r]=e;chrome.tabs.sendMessage(r[0].id,{action:"get_common_users",page:"commonUsers.html",user_1:{userName:t,userId:s.id,user_is_private:s.is_private,user_followed_by_viewer:s.followed_by_viewer,follows_count:s.follows_count,followed_by_count:s.followed_by_count},user_2:{userName:n,userId:o.id,user_is_private:o.is_private,user_followed_by_viewer:o.followed_by_viewer,follows_count:o.follows_count,followed_by_count:o.followed_by_count},relType:"All"})})},()=>alert(instaMessages.getMessage("TABISOPEN"))):alert(instaMessages.getMessage("THESAMEUSERS")):alert(instaMessages.getMessage("USERNAMEISREQPAR","2nd"))}else alert(instaMessages.getMessage("USERNAMEISREQPAR","1st"))})}),window.onload=function(){"use strict";_gaq.push(["_trackPageview"]),chrome.tabs.query({active:!0,currentWindow:!0},function(e){var t=e[0].url.match(instaDefOptions.regExtractUserName);t?instaUserInfo.getUserProfile({username:t[1]}).then(function(e){var t="";for(var n in delete e.profile_pic_url_hd,e)null!==e[n]&&(t+="connected_fb_page"===n||"external_url"===n?`${n}: <strong><a href='${e[n]}' target='_blank'>${e[n]}</a></strong><br/>`:`${n}: <strong>${e[n]}</strong><br/>`);document.getElementById("username").value=e.username,document.getElementById("username_1").value=e.username,document.getElementById("username_2").value=instaDefOptions.you,document.getElementById("details").innerHTML=t}):(document.getElementById("details").innerHTML="UserName is not found in URL",document.getElementById("username").value=instaDefOptions.you,document.getElementById("username_1").value=instaDefOptions.you)})};