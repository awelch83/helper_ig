!function(){"use strict";const e=new PromiseChrome;chrome.runtime.onInstalled.addListener(t=>{if("update"===t.reason);else if("install"===t.reason){const t=chrome.extension.getURL("readme.html");e.promiseCreateTab({url:t,selected:!0}),e.promiseQuery({url:"https://www.instagram.com/*"}).then(e=>{for(let t=0;t<e.length;t+=1){const{id:s}=e[t];chrome.tabs.executeScript(s,{file:"js/instaDefOptions.js"},()=>{chrome.tabs.executeScript(s,{file:"js/PromiseChrome.js"},()=>{chrome.tabs.executeScript(s,{file:"js/instaMessages.js"},()=>{chrome.tabs.executeScript(s,{file:"js/instagramHelper.js"},()=>{chrome.pageAction.setTitle({tabId:s,title:`Helper Tools for Instagram.com - ${chrome.app.getDetails().version}`}),chrome.pageAction.show(s)})})})})}})}}),chrome.runtime.onMessage.addListener(t=>{let s;function r(e,o,a){a.url===s&&"complete"===o.status&&(chrome.tabs.sendMessage(a.id,t),chrome.tabs.onUpdated.removeListener(r))}"showHelperIcon"===t.action?e.promiseQuery({url:"https://www.instagram.com/*"}).then(e=>{for(let t=0;t<e.length;t+=1)chrome.pageAction.setTitle({tabId:e[t].id,title:`Helper Tools for Instagram.com - ${chrome.app.getDetails().version}`}),chrome.pageAction.show(e[t].id)}):"get_insta_users"!==t.action&&"get_common_users"!==t.action&&"openLikerPage"!==t.action&&"openLikesPage"!==t.action&&"openMassFollowPage"!==t.action&&"openMassBlockPage"!==t.action||(s=chrome.extension.getURL(t.page),e.promiseCreateTab({url:s,selected:!0}).then(()=>{chrome.tabs.onUpdated.addListener(r)}))}),chrome.webRequest.onBeforeSendHeaders.addListener(e=>{const t=e.requestHeaders;for(const e in t)if("eferer"===t[e].name){t[e].name="Referer";break}return{requestHeaders:e.requestHeaders}},{urls:["https://www.instagram.com/query/","https://www.instagram.com/web/friendships/*","https://www.instagram.com/web/likes/*"]},["blocking","requestHeaders"])}();