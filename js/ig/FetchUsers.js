var FetchUsers=function(e){"use strict";var{obj:s,myData:r,htmlElements:t,updateStatusDiv:o,resolve:n,funcUpdateProgressBar:a,vueStatus:i}=e;function l(e,s,t){for(let o=0;o<r.length;o++)if(s.edges[t].node.id===r[o].id)return r[o]["user_"+e.relType]=!0,!0}var u=function(e){s.receivedResponses+=1;var i=e.data.user[Object.keys(e.data.user)[0]];return o(`received users - ${i.edges.length} (${s.relType}/${s.receivedResponses})`),function(e,s){for(let t=0;t<s.edges.length;t++)e.checkDuplicates&&l(e,s,t)||(s.edges[t].node.user_profile="https://www.instagram.com/"+s.edges[t].node.username,s.edges[t].node.user_follows=!1,s.edges[t].node.user_followed_by=!1,s.edges[t].node["user_"+e.relType]=!0,s.edges[t].node.requested_by_viewer&&(s.edges[t].node.followed_by_viewer=null),r.push(s.edges[t].node))}(s,i),function(e,s){var r=0+e[e.relType+"_processed"]+s;t[e.relType]?t[e.relType].asProgress("go",r):"function"==typeof a&&a(r);e[e.relType+"_processed"]=r}(s,i.edges.length),(0===s.limit||s[s.relType+"_processed"]<s.limit)&&i.page_info.has_next_page?(s.end_cursor=i.page_info.end_cursor,void setTimeout(()=>p(),c(s))):(t[s.relType]&&t[s.relType].asProgress("finish").asProgress("stop"),s.callBoth?(s.end_cursor=null,s.relType="follows"===s.relType?"followed_by":"follows",s.callBoth=!1,s.checkDuplicates=!0,void setTimeout(()=>p(),c(s))):void n(s))},d=function(e,s){o(e,"red"),instaTimeout.setTimeout(3e3).then(function(){return instaCountdown.doCountdown("status",s,"Users fetching",+(new Date).getTime()+instaDefOptions.retryInterval,i)}).then(()=>{console.log("Continue execution after HTTP error",s,new Date),p()})},p=function(){var e={headers:{"X-CSRFToken":s.csrfToken,"x-instagram-ajax":1,eferer:"https://www.instagram.com/"+s.userName+"/"}};axios.get("https://www.instagram.com/graphql/query",{params:{query_hash:instaDefOptions.queryHash[s.relType],variables:JSON.stringify({id:s.userId,first:s.pageSize,after:s.end_cursor?s.end_cursor:null})}},e).then(e=>u(e.data),e=>(function(e){console.log(e);var s=e.response?e.response.status:0;if(s>0&&console.log(`error response data - ${JSON.stringify(e.response.data)}/${s}`),console.log(`Error making http request to fetch the users, status - ${s}`),instaDefOptions.httpErrorMap.hasOwnProperty(s)){console.log(`HTTP${s} error trying to fetch the users.`,new Date);var r=instaMessages.getMessage(instaDefOptions.httpErrorMap[s],s,+instaDefOptions.retryInterval/6e4);d(r,s)}else alert(instaMessages.getMessage("ERRGETTINGFEED",s))})(e))};function c(e){return i&&i.delay?i.delay:instaDefOptions.noDelayForInit&&e.receivedResponses<instaDefOptions.requestsToSkipDelay?0:e.delay}return{fetchInstaUsers:p,retryError:d}};